---
title: 객체지향의 사실과 오해 2_타입과 추상화, 역할,책임,협력
author: sunghoon
date: 2022-01-02 20:40:00 +0900
categories: [책리뷰]
tags: [객체지향의 사실과 오해, 객체지향, 객체, 역할, 책임, 협력]
pin: false
comments: true
--- 

[출처]  
![책](/assets/img/Object-Orientation/book.jpg)  

[객체지향의 사실과 오해(조영호 지음, 위키북스, 2015)]    

# ◼︎ 타입과 추상화

## ▶︎ 추상화

* 어떤 양상, 세부 사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법이다.
	* 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만드는 것
	* 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거함으로써 단순하게 만드는 것
* 모든 경우에 추상화의 목적은 복잡성을 이해하기 쉬운 수준으로 단순화하는 것

## ▶︎ 개념

* 공통점을 기반으로 객체들을 묶기 위한 그릇
* 일반적으로 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념
* 예) 거리를 누비는 교통수단은 '자동차', 하늘을 나는 교통수단은 '비행기' 등
* 개념이 객체에 적용됐을 때 객체를 개념의 인스턴스
* 개념의 세 가지 관점

> * 심볼 : 개념을 가리키는 간략한 이름이나 명칭 (예. 운송수단)
> * 내연 : 개념의 의미 (예. 사람이 타고 이동 할 수 있는 것) 
> * 외연 : 개념에 속하는 객체들 (예. 자동차, 비행기, 배)
 
## ▶︎ 분류

* 객체에 특정한 개념을 적용하는 작업. 객체에 특정한 개념을 적용하기로 결심했을 때 우리는 그 객체를 특정한 집합의 멤버로 분류하고 있는 것
* 객체를 적절한 개념에 따라 분류한 애플리케이션은 유지보수가 용이하고 변경에 유연하게 대처할 수 있음


## ▶︎ 타입

* 타입은 개념이다.
* 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념을 의미
* 어떤 객체에 타입을 적용할 수 있을 때 그 객체를 타입의 인스턴스라고 한다.
* 타입의 인스턴스는 타입을 구성하는 외연인 객체 집합의 일원이 된다.
* 타입은 데이터가 어떻게 사용되느냐에 관한 것
* 타입에 속한 데이터를 메모리에 어떻게 표현하는지는 외부로부터 철저하게 감춰진다.
* 데이터 타입 : 메모리 안에 저장된 데이터의 종류를 분류하는 데 사용하는 메모리 집합에 관한 메타데이터다. 데이터에 대한 분류는 암시적으로 어떤 종류의 연산이 해당 데이터에 대해 수행될 수 있는지를 결정한다.

## ▶︎ 객체와 타입

* 어떤 객체가 어떤 타입에 속하는지를 경정하는 것은 객체가 수행하는 행동이다. 어떤 객체들이 동일한 행동을 수행할 수 있다면 그 객체들은 동일한 타입으로 분류될 수 있다.
* 객체의 내부적인 표현은 외부로부터 철저하게 감춰진다. 객체의 행동을 가장 효과적으로 수행할 수만 있다면 객체 내부의 상태를 어떤 방식으로 표현하더라도 무방하다.
* 객체가 다른 객체와 동일한 데이터를 가지고 있더라도 다른 행동을 한다면 그 객체들은 서로 다른 타입으로 분류돼야 한다.
* 반대로 같은 타입에 속한 객체는 행동만 동일하다면 서로 다른 데이터를 가질 수 있다.
* 객체의 타입을 결정하는 것은 **행동**뿐이다.
* 다형성이란 동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력
* **객체가 외부에 제공해야 하는 책임을 먼저 결정하고 그 책임을 수행하는 데 적합한 데이터를 나중에 결정한 후, 데이터를 책임을 수행하는 데 필요한 외부 인터페이스 뒤로 캡슐화해야 한다.** 

## ▶︎ 타입의 계층

### - 일반화와 특수화

* 일반적인 타입은 특수한 타입에 비해 적인 수의 행동을 가지며 특수한 타입은 일반적인 타입에 비해 더 많은 행동을 가진다. 단, 특수한 타입은 일반적인 타입이 할 수 있는 모든 행동을 동일하게 수행 할 수 있어야 한다.
* 일반적인 타입은 특수한 타입보다 더 적은 수의 행동을 가지지만 더 큰 크기의 외연 집합을 가진다. 특수한 타입은 일반적인 타입보다 더 많은 수의 행동을 가지지만 더 적은 크기의 외연 집합을 가진다.

### - 슈퍼타입과 서브타입

* 두 타입 간의 관계가 행동에 의해 결정된다는 점이 중요
* 어떤 타입이 다른 타입의 서브타입이 되기 위해서는 행위적 호환성을 만족시켜야 한다. 

## ▶︎ 정적 모델

### - 타입의 목적

* 타입을 사용하는 이유는 인간의 인지 능력으로는 시간에 따라 동적으로 변하는 객체의 복잡성을 극복하기 너무 어렵기 때문
* 타입은 시간에 따라 동적으로 변하는 객체의 상태를 시간과 무관한 정적인 모습으로 다룰 수 있게 해준다.
* **타입은 추상화다.** 타입을 이용하면 객체의 동적인 특성을 추상화 할 수 있다. 결국 타입은 시간에 따른 객체의 상태 변경이라는 복잡성을 단순화 할 수 있는 효과적인 방법인 것이다.

### - 동적모델과 정적모델

> * 동적모델 : 스냅샷처럼 실제로 객체가 살아 움직이는 동안 상태가 어떻게 변하고 어떻게 행동하는지를 포착하는 것
> * 정적모델 : 객체가 가질 수 있는 모든 상태와 모든 행동을 시간에 독립적으로 표현하는 것

* 객체지향 애플리케이션을 설계하고 구현하기 위해서는 객체 관점의 동적 모델과 객체를 추상화한 타입 관점의 정적 모델을 적절히 혼용해야한다.
* 객체지향 프로그래밍 언어에서 정적인 모델은 클래스를 이용해 구현된다. 따라서 타입을 구현하는 가장 보편적인 방법은 클래스를 이용하는 것이다. 


# ◼︎ 역할, 책임, 협력

* 객체지향 설계의 전체적인 품질을 결정하는 것은 개별 객체의 품질이 아니라 여러 객체들이 모여 이뤄내는 협력의 품질이다.

## ▶︎ 협력

* 협력은 한 사람이 다른 사람에게 도움을 요청할 때 시작된다. 요청을 받은 사람은 일을 처리한 후 요청한 사람에게 필요한 지식이나 서비스를 제공하는 것으로 요청에 응답한다.

## ▶︎ 책임

* 어떤 객체가 어떤 요청에 대해 대답해 줄 수 있거나, 적절한 행동을 할 의무가 있는 경우 해당 객체가 책임을 가진다고 말한다.
* "객체지향 개발에서 가장 중요한 능력은 책임을 능숙하게 소프트웨어 객체에 할당하는 것" - 크레이크 라만 (2004)

### - 책임의 분류

* 협력에 참여하는 객체들은 목표를 달성하는 데 필요한 책임을 수행한다.
* 하는 것(doing)
> * 객체를 생성하거나 계산을 하는 등의 스스로 하는 것
> * 다른 객체의 행동을 시작시키는 것
> * 다른 객체의 활동을 제어하고 조절하는 것

* 아는 것 (knowing)
> * 개인적인 정보에 관해 아는 것
> * 관련된 객체에 관해 아는 것
> * 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

### - 책임과 메시지

* 메시지 전송 : 객체가 다른 객체에게 주어진 책임을 수행하도록 요청을 보내는 것
* 두 객체 간의 협력은 메시지를 통해 이루어짐
* 메시지를 전송함으로써 협력을 요청하는 개체를 송신자. 메시지를 받아 요청을 처리하는 객체를 수신자.
* 메시지는 협력을 위해 한 객체가 다른 객체로 접근할 수 있는 유일한 방법
* **객체지향 설계는 협력에 참여하기 위해 어떤 객체가 어떤 책임을 수행해야 하고 어떤 객체로부터 메시지를 수신할 것인지를 결정하는 것으로 시작**
* 어떤 클래스가 필요하고 어떤 메서드를 포함해야 하는지를 결정하는 것은 책임과 메시지에 대한 대략적인 윤곽을 잡은 후에 시작해도 늦지 않다.

## ▶︎ 역할

* 역할은 협력 내에서 다른 객체로 대체할 수 있음을 나타내는 일종의 표식
* 다만, 역할을 대체할 수 있는 객체는 동일한 메시지를 이해할 수 있는 객체로 한정
* 예) 왕 -> 여왕, 증인1 -> 증인2
* 동일한 역할을 수행할 수 있다는 것은 해당 객체들이 협력 내에서 동일한 책임의 집합을 수행할 수 있다는 것을 의미 (동일한 역할을 수행하는 객체들이 동일한 메시지를 수신할 수 있기 때문에 동일한 책임을 수행할 수 있다는 것!)
* 역할은 객체지향 설계의 단순성(simplicity), 유연성(flexibility), 재사용성(reusability)를 뒷받침하는 핵심 개념

### - 협력의 추상화

* 역할의 가장 큰 가치는 하나의 협력 안에 여러 종류의 객체가 참여할 수 있게 함으로써 협력을 추상화 할 수 있다는 것
* 역할을 이용하면 협력을 추상화함으로써 단순화 할 수 있다.
> * 예)
> * 왕 - 검사 - 증인1
> * 왕 - 검사 - 증인2
> * 여왕 - 검사 - 증인2
> * -> "판사 - 검사 - 증인"이 참여하는 하나의 추상적인 협력으로 대체가능

* 역할은 협력 안에서 구체적인 객체로 대체될 수 있는 추상적인 협력자다.
* 역할의 대체 가능성은 행위 호환성을 의미하고, 행위 호환성은 동일한 책임의 수행을 의미한다.

## ▶︎ 객체의 모양을 결정하는 협력

### - 흔한오류

* 시스템에 필요한 데이터를 저장하기 위해 객체가 존재한다는 선입견. 물론 객체가 상태의 일부로 데이터를 포함하는 것은 사실이지만 데이터는 단지 객체가 행위를 수행하는 데 필요한 재료일 뿐이다. **실제로 중요한 것은 객체의 행동, 즉 책임이다.**
* 객체지향이 클래스와 클래스 간의 관계를 표현하는 정적인 측면에 중점을 둔다는 선입견. 중요한 것은 정적인 클래스가 아니라 협력에 참여하는 동적인 객체이며, 클래스는 단지 시스템에 필요한 객체를 표현하고 생성하기 위해 프로그래밍 언어가 제공하는 구현 매커니즘이라는 사실을 기억해라.
* **객체지향의 핵심은 클래스를 어떻게 구현할 것인가가 아니라 객체가 협력 안에서 어떤 책임과 역할을 수행할 것인지를 결정하는 것**

### - 협력을 따라 흐르는 객체의 책임

* 협력을 설계한다는 것은 설계에 참여하는 객체들이 주고받을 요청과 응답의 흐름을 결정한다는 것을 의미한다. 이렇게 결정된 요청과 응답의 흐름은 객체가 협력에 참여하기 위해 수행될 책임이 된다.
* 협력이라는 문맥에서 객체가 수행하게 될 적절한 책임, 즉 행동을 결정한 후에 그 행동을 수행하는 데 필요한 데이터를 고민해야 한다.
* **협력과 책임의 집합이 결정 된 후 -> 클래스 구현, 데이터 등을 고민**

## ▶︎ 객체지향 설계 기법

### - 책임-주도 설계 (Responsibility-Driven Design)

* 객체지향 설계란 애플리케이션의 기능을 구현하기 위한 협력 관계를 고안하고, 협력에 필요한 역할과 책임을 식별한 후 이를 수행할 수 있는 적절한 객체를 식별해 나가는 과정
* 객체지향 설계의 핵심은 올바른 책임을 올바른 객체에게 할당하는 것
* 시스템의 책임을 객체의 책임으로 변환하고, 각 객체가 책임을 수행하는 중에 필요한 정보나 서비스를 제공해줄 협력자를 찾아 해당 협력자에게 책임을 할당하는 순차적인 방식으로 객체들의 협력 공동체를 구축
* 개별적인 객체의 상태가 아니라 객체의 책임과 상호작용에 집중
* 시스템은 스스로 자신을 책임질 수 있을 정도로 충분히 자율적인 동시에 다른 객체와 우호적으로 협력할 수 있을 정도로 충분히 협조적인 객체들로 이뤄진 생태계를 구성

## - 디자인 패턴

* 책임-주도 설계는 객체의 역할, 책임, 협력을 고안하기 위한 방법과 절차를 제시한다면 디자인 패턴은 책임-주도 설계의 결과를 표현
* 패턴은 특정한 상황에서 설계를 돕기 위해 모방하고 수정할 수 있는 과거의 설계 경험

## - 테스트-주도 개발

* 테스트를 작성하는 것이 아니라 책임을 수행할 객체 또는 클라이언트가 기대하는 객체의 역할이 메시지를 수신할 때 어떤 결과를 반환하고 그 과정에서 어떤 객체와 협력할 것인지에 대한 기대를 코드의 형태로 작성하는 것
* 테스트-주도 개발은 책임-주도 설계를 통해 도달해야 하는 목적지를 테스트라는 안전장치를 통해 좀 더 빠르고 견고한 방법으로 도달할 수 있도록 해주는 최상의 설계 프랙티스




  





